---
title: "#70 ç´” CSS ä¹Ÿèƒ½åšæ»¾å‹•å‹•ç•«äº†ï¼animation-timeline è®“æ±è¥¿é‚Šæ»¾é‚Šå‹•"
datePublished: Sun Sep 21 2025 15:15:04 GMT+0000 (Coordinated Universal Time)
cuid: cmftu9oxj000102ld6jx0fl3j
slug: css-animation-timeline
tags: css3, css, css-animation, scroll-animation, animation-timeline

---

ä½ ä¸€å®šçœ‹éé‚£ç¨®å¾ˆé…·çš„ç¶²é ï¼šç•¶ä½ å‘ä¸‹æ»¾å‹•æ™‚ï¼ŒèƒŒæ™¯åœ–ç‰‡ç§»å‹•å¾—æ¯”å‰æ™¯æ–‡å­—æ…¢ï¼Œæˆ–è€…æŸå€‹å…ƒç´ æœƒéš¨è‘—æ»¾å‹•æ·¡å…¥ã€æ—‹è½‰ã€æ”¾å¤§ï¼Œå‰µé€ å‡ºå¼•äººå…¥å‹çš„æ·±åº¦å’Œæ•…äº‹æ„Ÿã€‚

é€™ç¨®æ•ˆæœï¼Œæˆ‘å€‘ç¨±ä¹‹ç‚ºã€Œ**æ²å‹•å¼å‹•ç•«** (Scroll-driven Animations)ã€æˆ–ã€Œ**è¦–å·®æ»¾å‹•** (Parallax Scrolling)ã€ã€‚

> ç‚ºäº†å¯«é€™ç¯‡ï¼Œæˆ‘ç™¼ç¾äº†ä¸€å€‹è¶…å¯¦ç”¨çš„ç¶²ç«™ï¼
> 
> é€™å€‹ç¶²ç«™ [Scroll-driven Animations](https://scroll-driven-animations.style/) æ”¶é›†äº†è¨±å¤šç”±æ»¾å‹•é©…å‹•çš„å‹•ç•«ï¼Œ ç”šè‡³é‚„æœ‰ç¨‹å¼ç¢¼ï¼ŒCSS èˆ‡ JS ç‰ˆæœ¬éƒ½æœ‰ï¼š
> 
> ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1758461571838/718510e2-4808-4a32-926b-c279bace4b0a.gif align="left")

éå»ï¼Œè¦å¯¦ç¾é€™ç¨®æ•ˆæœï¼Œå¹¾ä¹æ˜¯ JS çš„å°ˆå±¬ä»»å‹™ã€‚æˆ‘å€‘éœ€è¦ç›£è½ `scroll` äº‹ä»¶ï¼Œä¸æ–·è¨ˆç®—å…ƒç´ çš„ä½ç½®ï¼Œç„¶å¾Œç”¨ JS å»æ›´æ–°å®ƒçš„ CSS æ¨£å¼ã€‚é€™æ¨£åšä¸åƒ…éº»ç…©ï¼Œè€Œä¸”åœ¨æ•ˆèƒ½ä¸å¥½çš„è£ç½®ä¸Šï¼Œé‚„å¯èƒ½å› ç‚ºé »ç¹çš„è¨ˆç®—å°è‡´ç•«é¢å¡é “ã€‚

ä½†æ˜¯ç¾åœ¨ï¼ŒCSS æœ‰äº†åŸç”Ÿè§£æ±ºæ–¹æ¡ˆï¼Œèƒ½å°‡å‹•ç•«èˆ‡æ»¾å‹•å®Œç¾é€£çµçš„æ–°å±¬æ€§ â€”â€” `animation-timeline`ã€‚ è®“æˆ‘å€‘å¯ä»¥**ç”¨æ»¾å‹•çš„ä½ç½®ä¾†é©…å‹• CSS å‹•ç•«çš„é€²åº¦**ï¼Œå®Œå…¨å‘Šåˆ¥ JSï¼

> æ³¨æ„ï¼šé€™å€‹èªæ³• Firefox æš«ä¸æ”¯æ´ï¼Œä¸é Safari æœ€æ–°çš„ iOS26 å°‡æ”¯æ´ï¼Œæ‰€ä»¥æˆ‘èªç‚ºé€™æ˜¯å€¼å¾—æœŸå¾…çš„æ–°å±¬æ€§ï¼Œè©³æƒ…è«‹çœ‹ [Can I Use](https://caniuse.com/mdn-css_properties_animation-timeline)ã€‚ ï¼ˆæœ¬ç³»åˆ—æ–‡ç« ä»‹ç´¹çš„èªæ³•ï¼Œéƒ½æ˜¯å¤§æ–¼ç­‰æ–¼ 3 å€‹ç€è¦½å™¨ä»¥ä¸Šæœ‰æ”¯æ´çš„ï¼‰

---

## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šå¾ã€Œæ™‚é–“è»¸ã€åˆ°ã€Œæ»¾å‹•è»¸ã€

åœ¨æˆ‘å€‘é–‹å§‹ä¹‹å‰ï¼Œå…ˆä¾†ç†è§£ä¸€å€‹æœ€é‡è¦çš„è§€å¿µè½‰è®Šã€‚

å‚³çµ±çš„ CSS `@keyframes` å‹•ç•«æ˜¯åŸºæ–¼**æ™‚é–“**çš„ã€‚ ä¾‹å¦‚ï¼Œ`animation-duration: 3s;` ä»£è¡¨é€™å€‹å‹•ç•«æœƒåœ¨ 3 ç§’å…§å¾ 0% æ’­æ”¾åˆ° 100%ã€‚

è€Œ `animation-timeline` æ‰€åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠé€™å€‹**æ™‚é–“è»¸**ï¼Œæ›¿æ›æˆ**æ»¾å‹•è»¸**ã€‚

å‹•ç•«ä¸å†é—œå¿ƒã€Œéäº†å¹¾ç§’ã€ï¼Œè€Œæ˜¯é—œå¿ƒã€Œ**æ‚¨æ»¾å‹•äº†å¤šå°‘è·é›¢**ã€ã€‚ ä¾‹å¦‚ï¼Œæˆ‘å€‘å¯ä»¥è¨­å®šï¼š ç•¶ä½¿ç”¨è€…å¾é é¢é ‚éƒ¨æ»¾å‹•åˆ°åº•éƒ¨æ™‚ï¼Œå‹•ç•«å‰›å¥½å¾ 0% æ’­æ”¾åˆ° 100%ã€‚

æ»¾å‹•æ¢ï¼Œå°±æ˜¯æ‚¨çš„å‹•ç•«é€²åº¦æ¢ã€‚

---

## äºŒã€å¯¦ç¾æ–¹å¼èˆ‡èªæ³•

è¦å•Ÿç”¨é€™å€‹æ–°åŠŸèƒ½ï¼Œæˆ‘å€‘ä¸»è¦æœƒç”¨åˆ°å¹¾å€‹æ–°å±¬æ€§ï¼Œå®ƒå€‘é€šå¸¸æœƒä¸€èµ·æ­é…ä½¿ç”¨ã€‚

### 1\. `animation-timeline` - è·Ÿéš¨å“ªä¸€å€‹é€²åº¦è»¸

é€™å€‹å±¬æ€§è² è²¬**æŒ‡å®š**å‹•ç•«è¦è·Ÿéš¨å“ªä¸€å€‹é€²åº¦è»¸ã€‚å®ƒå¯ä»¥æ¥å— `scroll()` æˆ– `view()` å‡½å¼ã€‚

#### (1) `scroll()`

å°‡å‹•ç•«é€£çµåˆ°ä¸€å€‹**æ»¾å‹•å®¹å™¨ (scroller)** çš„æ»¾å‹•é€²åº¦ä¸Šã€‚0% ä»£è¡¨æ»¾å‹•æ¢åœ¨èµ·é»ï¼Œ100% ä»£è¡¨åœ¨çµ‚é»ã€‚

##### **èªæ³•ï¼š**

```css
div {
    animation-timeline: scroll( [scroller] [axis] );
    /* åƒæ•¸é †åºå¯å°èª¿ */
}
```

* `scroller` (æ»¾å‹•å®¹å™¨)ï¼šæŒ‡å®šè¦ç›£è½å“ªä¸€å€‹æ»¾å‹•æ¢ã€‚
    
    * `nearest` (é è¨­å€¼): å°‹æ‰¾æœ€è¿‘çš„ã€æ“æœ‰æ»¾å‹•æ¢çš„ç¥–å…ˆå…ƒç´ ã€‚
        
    * `root`: æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œé€šå¸¸æŒ‡æ•´å€‹é é¢çš„æ»¾å‹•æ¢ã€‚
        
    * `self`: å…ƒç´ è‡ªèº«çš„æ»¾å‹•æ¢ï¼ˆéœ€è¨­å®š `overflow: scroll` ç­‰ï¼‰ã€‚
        
* `axis` (è»¸å‘)ï¼šæ±ºå®šè¦ç›£æ¸¬å“ªå€‹æ–¹å‘çš„æ»¾å‹•æ¢ã€‚
    
    * `block` (é è¨­å€¼): å¡Šè»¸ã€‚åœ¨ã€Œæ©«æ›¸æ¨¡å¼ã€ä¸‹æŒ‡çš„å°±æ˜¯å‚ç›´æ»¾å‹• (`y`)ã€‚
        
    * `inline`: è¡Œå…§è»¸ã€‚åœ¨ã€Œæ©«æ›¸æ¨¡å¼ã€ä¸‹æŒ‡çš„å°±æ˜¯æ°´å¹³æ»¾å‹• (`x`)ã€‚
        
    * `y`: å‚ç›´è»¸ã€‚
        
    * `x`: æ°´å¹³è»¸ã€‚
        

> **æ³¨æ„**ï¼šå–®ç¨ä½¿ç”¨ `scroll()` ç­‰åŒæ–¼ `scroll(nearest block)`ã€‚å¦‚æœæŒ‡å®šçš„è»¸å‘æ²’æœ‰æ»¾å‹•æ¢ï¼Œå‹•ç•«å°‡ä¸æœƒè§¸ç™¼ã€‚

#### (2) `view()`

å°‡å‹•ç•«é€£çµåˆ°**å…ƒç´ è‡ªèº«åœ¨å¯è¦‹å€åŸŸ (Viewport) ä¸­çš„å¯è¦‹é€²åº¦**ä¸Šã€‚ç•¶å…ƒç´ é€²å…¥æˆ–é›¢é–‹ç•«é¢æ™‚ï¼Œå‹•ç•«æœƒéš¨ä¹‹æ¨é€²ã€‚

##### **èªæ³•ï¼š**

```css
div {
    animation-timeline: view( [axis] [inset] );
}
```

* `axis` (è»¸å‘)ï¼š èˆ‡ `scroll()` ä¸­çš„ `axis` ç›¸åŒ (`block`, `inline`, `x`, `y`)ã€‚
    
* `inset` (é‚Šè·)ï¼š èª¿æ•´ç”¨ä¾†åˆ¤æ–·ã€Œå¯è¦‹æ€§ã€çš„å€åŸŸç¯„åœï¼Œå¯ä»¥è¨­å®šä¸€å€‹æˆ–å…©å€‹å€¼ (start/end)ã€‚ä¾‹å¦‚ `view(block 100px 200px)` è¡¨ç¤ºç•¶å…ƒç´ é€²å…¥ã€Œè·é›¢è¦–çª—é ‚éƒ¨ 100pxã€è·é›¢è¦–çª—åº•éƒ¨ 200pxã€é€™å€‹ç¸®å°çš„å€åŸŸæ™‚ï¼Œå‹•ç•«æ‰æœƒé–‹å§‹æ’­æ”¾ã€‚
    

### 2\. `animation-range` - æ»¾å‹•ç¯„åœ

å¦‚æœ `animation-timeline` æ˜¯æŒ‡å®šã€Œè·Ÿèª°è·‘ã€ï¼Œé‚£ `animation-range` å°±æ˜¯å®šç¾©ã€Œ**å¾å“ªè£¡è·‘åˆ°å“ªè£¡**ã€ã€‚ å®ƒæ˜¯ `animation-range-start` å’Œ `animation-range-end` çš„ç¸®å¯«ï¼Œç”¨ä¾†ç²¾ç¢ºè¨­å®šå‹•ç•«åœ¨æ™‚é–“è»¸ä¸Šçš„ç”Ÿæ•ˆå€é–“ï¼ˆå¾ 0% æ’­æ”¾åˆ° 100% çš„ç¯„åœï¼‰ã€‚

##### **èªæ³•ï¼š**

å®ƒçš„å€¼é€šå¸¸ç”±**é–‹å§‹é»**å’Œ**çµæŸé»**å…©éƒ¨åˆ†çµ„æˆï¼š

```css
div {
    animation-range: [é–‹å§‹é»] [çµæŸé»];
}
```

é€™äº›é»å¯ä»¥ä½¿ç”¨éå¸¸é€™äº›ã€Œç¯„åœåç¨± (timeline-range-name)ã€ä¾†å®šç¾©ï¼š

* `cover`: æ¶µè“‹å…ƒç´ **å¾é–‹å§‹é€²å…¥**è¦–çª—ï¼Œåˆ°**å®Œå…¨é›¢é–‹**è¦–çª—çš„æ•´å€‹éç¨‹ã€‚
    
* `contain`: å…ƒç´ **å®Œå…¨åŒ…å«**åœ¨è¦–çª—å…§çš„éç¨‹ã€‚
    
* `entry`: å…ƒç´ å¾**é–‹å§‹é€²å…¥**è¦–çª—ï¼Œåˆ°**å®Œå…¨é€²å…¥**è¦–çª—çš„éç¨‹ã€‚
    
* `exit`: å…ƒç´ å¾**é–‹å§‹é›¢é–‹**è¦–çª—ï¼Œåˆ°**å®Œå…¨é›¢é–‹**è¦–çª—çš„éç¨‹ã€‚
    
* `entry-crossing`: å…ƒç´ **æ©«è·¨**è¦–çª—ã€Œèµ·å§‹é‚Šç·£ã€çš„éç¨‹ã€‚
    
* `exit-crossing`: å…ƒç´ **æ©«è·¨**è¦–çª—ã€ŒçµæŸé‚Šç·£ã€çš„éç¨‹ã€‚
    

**ç²¾ç´°å¾®èª¿èˆ‡ç¸®å¯«ï¼š**

* **æ­é…ç™¾åˆ†æ¯”**ï¼šä½ å¯ä»¥åœ¨ç¯„åœåç¨±å¾ŒåŠ ä¸Šç™¾åˆ†æ¯”æˆ–é•·åº¦ï¼Œé€²è¡Œæ›´ç²¾ç¢ºçš„æ§åˆ¶ã€‚ä¾‹å¦‚ï¼š
    
    * `entry 0%`: æŒ‡å…ƒç´ é ‚éƒ¨å‰›å¥½ç¢°åˆ°è¦–çª—åº•éƒ¨çš„é‚£ä¸€åˆ»ã€‚
        
    * `entry 100%`: æŒ‡å…ƒç´ åº•éƒ¨å‰›å¥½ç¢°åˆ°è¦–çª—åº•éƒ¨çš„é‚£ä¸€åˆ»ã€‚
        
    * `exit 50%`: æŒ‡å…ƒç´ ä¸­å¿ƒé»é›¢é–‹è¦–çª—é ‚éƒ¨çš„é‚£ä¸€åˆ»ã€‚
        
* **é è¨­å€¼**ï¼š`normal` æ˜¯é è¨­å€¼ï¼Œä»£è¡¨æ™‚é–“è»¸çš„èµ·é»æˆ–çµ‚é»ã€‚
    
* **å–®å€¼ç¸®å¯«**ï¼š
    
    * `animation-range: entry;` ç­‰åŒæ–¼ `animation-range: entry 0% entry 100%;`
        

> **æ¨è–¦å°å·¥å…·**ï¼š[View Timeline Ranges Visualizer](https://scroll-driven-animations.style/tools/view-timeline/ranges/)
> 
> ![View Timeline Ranges Visualizer](https://cdn.hashnode.com/res/hashnode/image/upload/v1758460992807/e42f7b07-fa27-4748-a2b5-b7cdff501b7c.png align="left")
> 
> é€™äº›ç¯„åœåç¨±çš„å°æ‡‰ä½ç½®å¯èƒ½æœ‰é»æŠ½è±¡ï¼Œæ¨è–¦ä½¿ç”¨ [View Timeline Ranges Visualizer](https://scroll-driven-animations.style/tools/view-timeline/ranges/) é€™å€‹å·¥å…·ä¾†å¹«åŠ©ä½ ç†è§£å®ƒå€‘ï¼Œå®ƒå¹«åŠ©ä½ è¦–è¦ºåŒ–é€™äº›é€²åº¦ï¼Œé€™å€‹å’Œé–‹é ­çš„åˆ†äº«æ˜¯åŒå€‹ä½œè€…åšçš„ã€‚

---

## ä¸‰ã€å¯¦éš›ç¯„ä¾‹

### 1\. æ–¹å¼ä¸€ï¼šåŒ¿åçš„æ™‚é–“è»¸ `scroll()` å’Œ `view()`

é€™æ˜¯æœ€ç›´è¦ºä¹Ÿæœ€ç°¡å–®çš„æ–¹æ³•ï¼Œç›´æ¥åœ¨å…ƒç´ çš„å‹•ç•«å±¬æ€§ä¸­ï¼Œä½¿ç”¨å‡½å¼ä¾†æŒ‡å®šå‹•ç•«è¦è·Ÿéš¨çš„é€²åº¦ã€‚

é€™è£¡æˆ‘å€‘ä½¿ç”¨åšäº†å¸¸è¦‹çš„å…©ç¨®æ‡‰ç”¨æ–¹å¼ï¼š

* é é¢æ»¾å‹•é€²åº¦æ¢
    
* æ–‡å­—æ®µè½ç”±å·¦æ·¡å…¥å‡ºç¾
    

> DEMO é€£çµï¼š[CSS Scroll-driven Animation with animation-timeline (scroll() & view())](https://codepen.io/im1010ioio/pen/emJmOmp)

#### **(1)** `scroll()` **çš„æ‡‰ç”¨ï¼šé é¢æ»¾å‹•é€²åº¦æ¢**

è®“æˆ‘å€‘ä¾†è£½ä½œäº†ä¸€å€‹ç°¡å–®çš„é ‚éƒ¨é€²åº¦æ¢ï¼Œå®ƒçš„å¯¬åº¦æœƒéš¨è‘—æ•´å€‹é é¢çš„æ»¾å‹•è€Œè®ŠåŒ–ã€‚

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1758463620418/7c859152-ab9d-40d8-87f2-4072ca8a34f5.gif align="center")

```css
#progressbar{
    position: fixed;
    top: 0;
    z-index: 1000;
    width: 100%;
    height: 10px;
    background-color: yellow;
    transform-origin: top left; /* è®“ç¸®æ”¾å¾å·¦é‚Šé–‹å§‹ */

    /* å°‡ pagePercent å‹•ç•«é€£çµåˆ°é é¢æ»¾å‹•æ¢ */
    animation-name: pagePercent;
    animation-direction: alternate;
    animation-timeline: scroll();
}
@keyframes pagePercent {
    from { transform: scaleX(0); }
    to {   transform: scaleX(1); }
}
```

é€™è£¡çš„ `animation-timeline: scroll();` æ˜¯æ ¸å¿ƒï¼š

* å®ƒå‘Šè¨´ `#progressbar` çš„å‹•ç•«é€²åº¦è¦å®Œå…¨è·Ÿéš¨**æ»¾å‹•æ¢**çš„é€²åº¦ã€‚
    
* å› ç‚ºæ²’æœ‰æŒ‡å®š `scroller`ï¼Œå®ƒæœƒé è¨­è·Ÿéš¨ `root` (æ ¹æ»¾å‹•æ¢)ï¼Œä¹Ÿå°±æ˜¯æ•´å€‹é é¢ã€‚ç•¶é é¢æ»¾åˆ°æœ€é ‚éƒ¨æ™‚ï¼Œé€²åº¦æ¢ `scaleX` ç‚º 0ï¼›æ»¾åˆ°æœ€åº•éƒ¨æ™‚ï¼Œ`scaleX` ç‚º 1ã€‚
    

#### **(2)** `view()` çš„æ‡‰ç”¨ï¼šæ–‡å­—æ®µè½ç”±å·¦æ·¡å…¥å‡ºç¾

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1758463736715/a3fab549-9c6a-4d2a-a32e-14bea7477b14.gif align="center")

è€Œå¦å¤–ä¸€å€‹ç¯„ä¾‹è®“æ¯ä¸€å€‹ `<p>` æ®µè½åœ¨é€²å…¥ç•«é¢æ™‚ï¼Œ  
æ‰è§¸ç™¼è‡ªå·±çš„æ·¡å…¥å…¼ç§»å…¥å‹•ç•«ï¼ˆä¸éé€™å€‹å‹•ç•«æ•ˆæœæ›´å¸¸å‡ºç¾åœ¨ç…§ç‰‡ä¸Šï¼‰ã€‚

```css
p {
    opacity: 0; /* åˆå§‹ç‹€æ…‹ç‚ºé€æ˜ */

    /* å°‡ moveIn å‹•ç•«é€£çµåˆ°å…ƒç´ è‡ªèº«çš„å¯è¦‹é€²åº¦ */
    animation: moveIn linear forwards;
    animation-timeline: view();
    animation-range: entry 50% cover 50%;
}

@keyframes moveIn {
    0%   { translate: -10%; opacity: 0; }
    100% { translate: 0%;   opacity: 1; }
}
```

é—œæ–¼é€™è£¡çš„ `animation-timeline: view();` ï¼š

* å°‡å‹•ç•«çš„æ™‚é–“è»¸ï¼Œç¶å®šåˆ°**æ¯ä¸€å€‹** `<p>` æ–‡å­—æ®µè½ï¼Œé€²å…¥ç•«é¢åˆ°çµæŸçš„éç¨‹ã€‚
    
* `animation-range: entry 50% cover 50%;` è¡¨ç¤ºå‹•ç•«çš„æ’­æ”¾å€é–“ï¼š
    
    * å‹•ç•«æœƒåœ¨ `<p>` å…ƒç´ çš„ä¸­å¿ƒé» (`50%`) é€²å…¥ (`entry`) è¦–çª—æ™‚é–‹å§‹ï¼Œ
        
    * ä¸¦åœ¨å®ƒçš„ä¸­å¿ƒé»åˆ°é”è¦–çª—é ‚éƒ¨ (`cover 50%`) æ™‚æ’­æ”¾å®Œç•¢ã€‚
        

#### (3) é€²éšç”¨æ³•ï¼šä¸€æ¬¡ä½¿ç”¨å¤šå€‹å‹•ç•«ï¼ˆæ™‚é–“è»¸ï¼‰

ä¸€å€‹å…ƒç´ å¯ä»¥åŒæ™‚åŸ·è¡Œå¤šå€‹å‹•ç•«ï¼Œä¸¦è®“å®ƒå€‘åˆ†åˆ¥è·Ÿéš¨ä¸åŒçš„åŒ¿åæ™‚é–“è»¸ã€‚åªéœ€è¦ç”¨é€—è™Ÿ `,` éš”é–‹å¤šå€‹å‹•ç•«è¨­å®šå³å¯ã€‚

**ç¯„ä¾‹**ï¼š  
è®“ä¸€å€‹æ–¹å¡Šåœ¨**æ•´å€‹é é¢æ»¾å‹•æ™‚æœƒæ—‹è½‰**ï¼ˆä½¿ç”¨ `scroll()`ï¼‰ï¼Œ  
åŒæ™‚ï¼Œç•¶å®ƒ**è‡ªå·±é€²å…¥ç•«é¢ä¸­å¤®æ™‚æœƒæ”¹è®Šé¡è‰²**ï¼ˆä½¿ç”¨ `view()`ï¼‰ã€‚

```css
.box {
  /* 1. å®šç¾©å…©å€‹å‹•ç•«ï¼Œç”¨é€—è™Ÿåˆ†éš” */
  animation-name: rotate-effect, color-effect;
  /* 2. æŒ‰é †åºè®“æ¯å€‹å‹•ç•«è·Ÿéš¨å„è‡ªçš„æ™‚é–“è»¸ */
  animation-timeline: scroll(root), view();
  /* å…¶ä»–å‹•ç•«å±¬æ€§... */
}
```

é€™è£¡çš„å°æ‡‰é—œä¿‚æ˜¯**æŒ‰é †åºçš„**ï¼šç¬¬ä¸€å€‹å‹•ç•« `rotate-effect` æœƒè·Ÿéš¨ç¬¬ä¸€å€‹æ™‚é–“è»¸ `scroll(root)`ï¼Œè€Œç¬¬äºŒå€‹å‹•ç•« `color-effect` å‰‡æœƒè·Ÿéš¨ç¬¬äºŒå€‹æ™‚é–“è»¸ `view()`ã€‚

---

### 2\. æ–¹å¼äºŒï¼šç‚ºæ™‚é–“è»¸å‘½åï¼š `scroll-timeline-name` ç”¨æ³•

åœ¨ `scroll()` å’Œ `view()` æˆç‚ºæ¨™æº–å‰ï¼Œæˆ‘å€‘éœ€è¦ç”¨æ¯”è¼ƒç¹ç‘£çš„å…©å€‹æ­¥é©Ÿä¾†å®šç¾©æ™‚é–“è»¸ï¼š

1. **åœ¨æ»¾å‹•å®¹å™¨ä¸Šå®šç¾©ä¸¦å‘½åæ™‚é–“è»¸**
    
2. **åœ¨å‹•ç•«å…ƒç´ ä¸Šå¼•ç”¨è©²æ™‚é–“è»¸**
    

é›–ç„¶æ¯”è¼ƒéº»ç…©ï¼Œä¸å»ºè­°ä½¿ç”¨ï¼Œä½†æ˜¯äº†è§£çš„è©±ï¼Œè¬ä¸€é‡åˆ°äº†ï¼Œå°±èƒ½çœ‹å¾—æ‡‚ã€‚

> DEMO é€£çµï¼š[CSS Scroll-driven Animation with animation-timeline (named scroll progress timelines)](https://codepen.io/im1010ioio/pen/xbZxWKJ)

#### (1) ç­‰åŒæ–¼ `scroll()` çš„åŸºæœ¬ç”¨æ³•

æˆ‘å€‘ç”¨èªå‰›å‰›çš„ç¬¬ä¸€å€‹ä¾‹å­ã€Œé é¢æ»¾å‹•é€²åº¦æ¢ã€æ”¹å¯«çœ‹çœ‹ï¼Œé‡é»æ˜¯ã€Œ**è¦åœ¨æ»¾å‹•å®¹å™¨ä¸Šå®šç¾©ä¸¦å‘½åæ™‚é–“è»¸**ã€ï¼š

```css
/* åœ¨æ»¾å‹•å®¹å™¨ä¸Šå®šç¾©ä¸¦å‘½åæ™‚é–“è»¸ */ 
html {
    /* åœ¨ html é€™å€‹æ»¾å‹•å®¹å™¨ä¸Šï¼Œå»ºç«‹ä¸€å€‹åç‚º --page-percent çš„æ™‚é–“è»¸ */
    scroll-timeline-name: --page-percent;
}

#progressbar {
    animation-name: pagePercent;
    /* åœ¨å‹•ç•«å…ƒç´ ä¸Šå¼•ç”¨è©²æ™‚é–“è»¸ */
    animation-timeline: --page-percent;
}

/* keyframes ç•¥ */
```

#### (2) ç­‰åŒæ–¼ `view()` çš„åŸºæœ¬ç”¨æ³•

æˆ‘å€‘ç”¨èªå‰›å‰›çš„ç¬¬äºŒå€‹ä¾‹å­ã€Œæ–‡å­—æ®µè½ç”±å·¦æ·¡å…¥å‡ºç¾ã€æ”¹å¯«çœ‹çœ‹ï¼Œé‡é»æ˜¯ã€Œ**è¿½è¹¤ã€Œè‡ªèº«ã€åœ¨æ»¾å‹•å®¹å™¨ä¸­çš„ viewprot é€²åº¦ã€**ï¼š

```css
p {
    opacity: 0; /* åˆå§‹ç‹€æ…‹ç‚ºé€æ˜ */

    /* è¿½è¹¤ p å…ƒç´ ã€Œè‡ªèº«ã€åœ¨æ»¾å‹•å®¹å™¨ä¸­çš„ viewprot é€²åº¦ */
    view-timeline-name: --p-appearance;

    /* å°‡ moveIn å‹•ç•«é€£çµåˆ°æˆ‘å€‘å‰›å‰›åœ¨å®ƒè‡ªå·±èº«ä¸Šå‰µå»ºçš„ --p-appearance æ™‚é–“è»¸ */
    animation: moveIn linear forwards;
    animation-timeline: --p-appearance;
    animation-range: entry 50% cover 50%;
}

/* keyframes ç•¥ */
```

#### (3) å¦‚æœåŒå€‹æ»¾å‹•å®¹å™¨æœ‰å¤šå€‹æ™‚é–“è»¸

å¦‚æœä¸€å€‹æ»¾å‹•å®¹å™¨ä¸Šè¦å®šç¾©å¤šå€‹å‘½åçš„æ™‚é–“è»¸ï¼Œå¯ä»¥åœ¨ `scroll-timeline-name` ç”¨é€—è™Ÿ `,` éš”é–‹å¤šå€‹å‹•ç•«åç¨±å³å¯ï¼š

```css
html {
    scroll-timeline-name:
        --page-percent,
        --square-timeline;
}
```

---

`animation-timeline` å°‡å‹•ç•«çš„æ§åˆ¶æ¬Šå¾ JS äº¤é‚„çµ¦äº†ç€è¦½å™¨æœ¬èº«ï¼Œé€™ä»£è¡¨è‘—ç„¡èˆ‡å€«æ¯”çš„æµæš¢èˆ‡æ•ˆèƒ½ã€‚ä¸åªèƒ½åšè¦–å·®æ•ˆæœï¼Œé‚„èƒ½ç”¨ä¾†åšæ»¾å‹•é€²åº¦æ¢ã€åœ–ç‰‡çš„ Lazyload å‹•ç•«ã€é£›å…¥æ•ˆæœç­‰ç­‰ï¼Œå¯èƒ½æ€§ç„¡çª®ç„¡ç›¡ï¼Œç”šè‡³æŒ‘æˆ°å¸¸è¦‹çš„ JS å¥—ä»¶ï¼ˆå¦‚ [GSAP](https://gsap.com/) ç­‰ç­‰ï¼‰ã€‚

é›–ç„¶ç›®å‰é‚„éœ€è¦æ³¨æ„ç€è¦½å™¨çš„æ”¯æ´åº¦ï¼Œä½†æ¥ä¸‹ä¾†å°±ç­‰å¾…ä½ ä¾†è©¦è©¦çœ‹é€™å€‹èªæ³•å›‰ï¼  
å¸Œæœ›æœ‰æœä¸€æ—¥èƒ½å…¨é¢æ”¯æ´ï¼Œé€™æ¨£çš„è©±æœƒå¾ˆæ–¹ä¾¿ï¼

é€™æ˜¯æ»¾å‹•ç³»åˆ—çš„æœ€å¾Œä¸€ç¯‡äº†ï¼  
æ˜å¤©é–‹å§‹æˆ‘å€‘ä¾†è£œå……ä¸€äº›ä¹‹å‰æ²’æœ‰æåˆ°éçš„æ–°èªæ³•ã€‚

å¦å¤–ï¼Œèˆ‡æ»¾å‹•ç›¸é—œçš„ CSSï¼Œä¹‹å‰æœ‰ä¸€å€‹æ–°èªæ³• `container-type: scroll-state` ï¼ˆ[Chrome for Developer çš„ä»‹ç´¹æ–‡ç« ](https://developer.chrome.google.cn/blog/css-scroll-state-queries?hl=zh-tw)ï¼‰ï¼Œæœªä¾†æˆ–è¨±èƒ½è®“æˆ‘å€‘ç”¨ `@container` æŸ¥è©¢ä¾†åµæ¸¬å…ƒç´ çš„æ»¾å‹•ç‹€æ…‹ï¼Œä½†ç›®å‰ Safari å’Œ Firefox éƒ½å°šæœªæ”¯æ´ï¼Œæ‰€ä»¥å°±é‚„æ²’æœ‰å¯«é€™ç¯‡å›‰ï¼å¦‚æœæœªä¾†é€™èªæ³•æ”¯æ´äº†ï¼Œä¹Ÿè¨±æˆ‘æœƒå†å¯«ç¯‡ä¾†ä»‹ç´¹ã€‚

---

> **å»¶ä¼¸é–±è®€ï¼š**
> 
> * [MDN - animation-timeline](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timeline)
>     
> * [Chrome for Developer - ä½¿ç”¨æ²å‹•å¼å‹•ç•«å‘ˆç¾æ²å‹•æ™‚çš„å…ƒç´ å‹•ç•«](https://developer.chrome.com/docs/css-ui/scroll-driven-animations?hl=zh-tw)
>     
> * [animation-timeline : view() | scroll() | gsap scroll killer](https://codepen.io/abhishek-bhardwaj/pen/QWzqpgz)
>     

---

#### â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“

æ„Ÿè¬çœ‹åˆ°æœ€å¾Œçš„ä½ ï¼Œè‹¥ä½ è¦ºå¾—ç²ç›Šè‰¯å¤šï¼Œè«‹ä¸è¦åå—‡çµ¦æˆ‘æŒ‰å€‹å–œæ­¡ã€‚â¤ï¸

å¦‚æœä½ å–œæ­¡æˆ‘çš„å‰µä½œï¼Œé‚„æƒ³çœ‹çœ‹å…¶ä»–æœ‰è¶£çš„åˆ†äº«èˆ‡æ—¥å¸¸ï¼Œ  
å¯ä»¥è¿½è¹¤æˆ‘çš„ IG [@im1010ioio](https://www.instagram.com/im1010ioio/)ï¼Œæˆ–è€…æ˜¯[ğŸ§‹é€æ¯çå¥¶é¼“å‹µæˆ‘](https://im1010ioio.bobaboba.me/)ï¼Œè¬è¬ä½ ğŸ¥°ã€‚

![Eva Chen é€æ¯çå¥¶é¼“å‹µæˆ‘](https://cdn.hashnode.com/res/hashnode/image/upload/v1682564435616/c15640fc-6cee-4c33-a898-9cd6820f165a.png align="center")